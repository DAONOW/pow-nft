{"ast":null,"code":"import { ethers } from 'ethers';\nimport ProposalAbi from 'abi/Proposal.json';\nconst proposalContractAddress = '0x5fbdb2315678afecb367f032d93f642f64180aa3';\nconst nftContractAddress = '';\nexport const ProposalContract = async () => {\n  try {\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any');\n    const proposalContract = new ethers.Contract(proposalContractAddress, ProposalAbi.abi, await provider.getSigner()); // get nft contract address;\n\n    const nftAddress = await proposalContract.NFT();\n    console.log(nftAddress);\n    return proposalContract;\n  } catch (err) {\n    console.log(err);\n  }\n};\n_c = ProposalContract;\nexport const NftContract = async () => {};\n_c2 = NftContract;\nexport const fetchProposalCount = async () => {\n  try {\n    const Proposal = await ProposalContract();\n    const proposalCount = await Proposal.proposalID();\n    return proposalCount.toNumber();\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const fetchAllProposals = async () => {\n  try {\n    const Proposal = await ProposalContract();\n    const proposalCount = await fetchProposalCount();\n    const allProposals = [];\n\n    for (let i = 0; i < proposalCount; i++) {\n      const fetchedProposal = await Proposal.Proposals(i);\n      allProposals.push(fetchedProposal);\n    }\n\n    return allProposals;\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const approveProposal = async proposalId => {\n  try {\n    const Proposal = await ProposalContract();\n    await Proposal.approveProposal(proposalId);\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const createProposal = async dataURL => {\n  try {\n    const Proposal = await ProposalContract();\n    await Proposal.createProposal(dataURL);\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const fetchNftCount = async () => {\n  try {} catch (err) {\n    console.log(err);\n  }\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProposalContract\");\n$RefreshReg$(_c2, \"NftContract\");","map":{"version":3,"sources":["/Users/K.Z./Desktop/crypto/pow-nft/frontend/src/common/wallet/contractHelpers.ts"],"names":["ethers","ProposalAbi","proposalContractAddress","nftContractAddress","ProposalContract","provider","providers","Web3Provider","window","ethereum","proposalContract","Contract","abi","getSigner","nftAddress","NFT","console","log","err","NftContract","fetchProposalCount","Proposal","proposalCount","proposalID","toNumber","fetchAllProposals","allProposals","i","fetchedProposal","Proposals","push","approveProposal","proposalId","createProposal","dataURL","fetchNftCount"],"mappings":"AAAA,SAASA,MAAT,QAAuB,QAAvB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AAEA,MAAMC,uBAAuB,GAAG,4CAAhC;AACA,MAAMC,kBAAkB,GAAG,EAA3B;AAEA,OAAO,MAAMC,gBAAgB,GAAG,YAA0B;AACxD,MAAI;AACF,UAAMC,QAAQ,GAAG,IAAIL,MAAM,CAACM,SAAP,CAAiBC,YAArB,CAAkCC,MAAM,CAACC,QAAzC,EAAmD,KAAnD,CAAjB;AACA,UAAMC,gBAAgB,GAAG,IAAIV,MAAM,CAACW,QAAX,CAAoBT,uBAApB,EAA6CD,WAAW,CAACW,GAAzD,EAA8D,MAAMP,QAAQ,CAACQ,SAAT,EAApE,CAAzB,CAFE,CAIF;;AACA,UAAMC,UAAU,GAAG,MAAMJ,gBAAgB,CAACK,GAAjB,EAAzB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AAEA,WAAOJ,gBAAP;AACD,GATD,CASE,OAAOQ,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CAbM;KAAMd,gB;AAeb,OAAO,MAAMe,WAAW,GAAG,YAAY,CAAE,CAAlC;MAAMA,W;AAEb,OAAO,MAAMC,kBAAkB,GAAG,YAAoC;AACpE,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMjB,gBAAgB,EAAvC;AACA,UAAMkB,aAAa,GAAG,MAAMD,QAAQ,CAACE,UAAT,EAA5B;AACA,WAAOD,aAAa,CAACE,QAAd,EAAP;AACD,GAJD,CAIE,OAAON,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CARM;AAUP,OAAO,MAAMO,iBAAiB,GAAG,YAA0B;AACzD,MAAI;AACF,UAAMJ,QAAQ,GAAG,MAAMjB,gBAAgB,EAAvC;AACA,UAAMkB,aAAa,GAAG,MAAMF,kBAAkB,EAA9C;AAEA,UAAMM,YAAY,GAAG,EAArB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,aAApB,EAAmCK,CAAC,EAApC,EAAwC;AACtC,YAAMC,eAAe,GAAG,MAAMP,QAAQ,CAACQ,SAAT,CAAmBF,CAAnB,CAA9B;AACAD,MAAAA,YAAY,CAACI,IAAb,CAAkBF,eAAlB;AACD;;AAED,WAAOF,YAAP;AACD,GAZD,CAYE,OAAOR,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CAhBM;AAkBP,OAAO,MAAMa,eAAe,GAAG,MAAOC,UAAP,IAA4C;AACzE,MAAI;AACF,UAAMX,QAAQ,GAAG,MAAMjB,gBAAgB,EAAvC;AACA,UAAMiB,QAAQ,CAACU,eAAT,CAAyBC,UAAzB,CAAN;AACD,GAHD,CAGE,OAAOd,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CAPM;AASP,OAAO,MAAMe,cAAc,GAAG,MAAOC,OAAP,IAAyC;AACrE,MAAI;AACF,UAAMb,QAAQ,GAAG,MAAMjB,gBAAgB,EAAvC;AACA,UAAMiB,QAAQ,CAACY,cAAT,CAAwBC,OAAxB,CAAN;AACD,GAHD,CAGE,OAAOhB,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CAPM;AASP,OAAO,MAAMiB,aAAa,GAAG,YAA0B;AACrD,MAAI,CACH,CADD,CACE,OAAOjB,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,CALM","sourcesContent":["import { ethers } from 'ethers';\nimport ProposalAbi from 'abi/Proposal.json';\n\nconst proposalContractAddress = '0x5fbdb2315678afecb367f032d93f642f64180aa3';\nconst nftContractAddress = '';\n\nexport const ProposalContract = async (): Promise<any> => {\n  try {\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any');\n    const proposalContract = new ethers.Contract(proposalContractAddress, ProposalAbi.abi, await provider.getSigner());\n\n    // get nft contract address;\n    const nftAddress = await proposalContract.NFT();\n    console.log(nftAddress);\n\n    return proposalContract;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const NftContract = async () => {};\n\nexport const fetchProposalCount = async (): Promise<number | void> => {\n  try {\n    const Proposal = await ProposalContract();\n    const proposalCount = await Proposal.proposalID();\n    return proposalCount.toNumber();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const fetchAllProposals = async (): Promise<any> => {\n  try {\n    const Proposal = await ProposalContract();\n    const proposalCount = await fetchProposalCount();\n\n    const allProposals = [];\n\n    for (let i = 0; i < proposalCount; i++) {\n      const fetchedProposal = await Proposal.Proposals(i);\n      allProposals.push(fetchedProposal);\n    }\n\n    return allProposals;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const approveProposal = async (proposalId: number): Promise<any> => {\n  try {\n    const Proposal = await ProposalContract();\n    await Proposal.approveProposal(proposalId);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const createProposal = async (dataURL: string): Promise<any> => {\n  try {\n    const Proposal = await ProposalContract();\n    await Proposal.createProposal(dataURL);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const fetchNftCount = async (): Promise<any> => {\n  try {\n  } catch (err) {\n    console.log(err);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}